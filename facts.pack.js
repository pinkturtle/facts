// https://pinkturtle.github.io/facts version 0.0.0
// Includes https://facebook.github.io/immutable-js
// ••••••••••••••••••••••••••••••••••••••••••••••••
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Facts=t()}}(function(){var t,e,r;return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var s=typeof require=="function"&&require;if(!a&&s)return s(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[o].exports}var u=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){(function(){var r,n,i,u,o,a=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++){if(e in this&&this[e]===t)return e}return-1};r=t("immutable");e.exports=function(t,e){var n,i,a;a=u(t.datoms,e);i=a.reduce(o(),r.fromJS({datoms:[],entities:{}}));n=r.Stack(i.get("datoms"));n.entities=i.get("entities");return n};u=function(t,e){var r;switch(false){case e.min!==(r=e.max)||r!==void 0:return t;case!(e.max!==void 0&&e.min===void 0):return t.skipUntil(function(t){return t.get(4)<=e.max});case!(e.max===void 0&&e.min!==void 0):return t.takeWhile(function(t){return t.get(4)>=e.min});default:return t.skipUntil(function(t){return t.get(4)<=e.max}).takeWhile(function(t){return t.get(4)>=e.min})}};o=function(){var t,e;t=[false,void 0];e=[];return function(r,u,o){var s;if(n(u)){return r}if((s=u.get(0),a.call(t,s)>=0)&&e.push(u)){return r}if(e.some(function(t){return i(t,u)&&t.get(4)>u.get(4)})){return r}if(r.hasIn(["entities",u.get(1),u.get(2)])){return r}return r.setIn(["datoms"],r.get("datoms").push(u)).setIn(["entities",u.get(1),u.get(2)],u.get(3))}};n=function(t){return n.pattern.test(t.get(1))};n.pattern=/T[0-9]+/;i=function(t,e){return t.get(1)===e.get(1)&&t.get(2)===e.get(2)&&t.get(3)===e.get(3)}}).call(this)},{immutable:7}],2:[function(t,e,r){(function(){var t,r,n,i,u,o,a,s,f;e.exports=t={};r=/\s+/;n=function(t,e,i,u,o){var a,s;a=0;s=void 0;if(i&&typeof i==="object"){if(u!==void 0&&"context"in o&&o.context===void 0){o.context=u}s=Object.keys(i);while(a<s.length){e=n(t,e,s[a],i[s[a]],o);a++}}else if(i&&r.test(i)){s=i.split(r);while(a<s.length){e=t(e,s[a],u,o);a++}}else{e=t(e,i,u,o)}return e};t.on=function(t,e,r){return i(this,t,e,r)};i=function(t,e,r,i,u){var a;t._events=n(o,t._events||{},e,r,{context:i,ctx:t,listening:u});if(u){a=t._listeners||(t._listeners={});a[u.id]=u}return t};t.listenTo=function(t,e,r){var n,u,o,a;if(!t){return this}n=t._listenId||(t._listenId=_.uniqueId("l"));o=this._listeningTo||(this._listeningTo={});u=o[n];if(!u){a=this._listenId||(this._listenId=_.uniqueId("l"));u=o[n]={obj:t,objId:n,id:a,listeningTo:o,count:0}}i(t,e,r,this,u);return this};o=function(t,e,r,n){var i,u,o,a;if(r){o=t[e]||(t[e]=[]);i=n.context;u=n.ctx;a=n.listening;if(a){a.count++}o.push({callback:r,context:i,ctx:i||u,listening:a})}return t};t.off=function(t,e,r){if(!this._events){return this}this._events=n(u,this._events,t,e,{context:r,listeners:this._listeners});return this};t.stopListening=function(t,e,r){var n,i,u,o;o=this._listeningTo;if(!o){return this}i=t?[t._listenId]:Object.keys(o);n=0;while(n<i.length){u=o[i[n]];if(!u){break}u.obj.off(e,r,this);n++}return this};u=function(t,e,r,n){var i,u,o,a,s,f,h,c,p,l;if(!t){return}a=0;c=void 0;i=n.context;h=n.listeners;if(!e&&!r&&!i){s=Object.keys(h);while(a<s.length){c=h[s[a]];delete h[c.id];delete c.listeningTo[c.objId];a++}return}p=e?[e]:Object.keys(t);while(a<p.length){e=p[a];o=t[e];if(!o){break}l=[];f=0;while(f<o.length){u=o[f];if(r&&r!==u.callback&&r!==u.callback._callback||i&&i!==u.context){l.push(u)}else{c=u.listening;if(c&&--c.count===0){delete h[c.id];delete c.listeningTo[c.objId]}}f++}if(l.length){t[e]=l}else{delete t[e]}a++}return t};t.once=function(t,e,r){var i;i=n(a,{},t,e,Function.bind(this.off,this));if(typeof t==="string"&&r===null){e=void 0}return this.on(i,e,r)};t.listenToOnce=function(t,e,r){var i;i=n(a,{},e,r,Function.bind(this.stopListening,this,t));return this.listenTo(t,i)};a=function(t,e,r,n){var i;if(r){i=t[e]=_.once(function(){n(e,i);r.apply(this,arguments)});i._callback=r}return t};t.trigger=function(t){var e,r,i;if(!this._events){return this}i=Math.max(0,arguments.length-1);e=Array(i);r=0;while(r<i){e[r]=arguments[r+1];r++}n(s,this._events,t,void 0,e);return this};s=function(t,e,r,n){var i,u;if(t){u=t[e];i=t.all;if(u&&i){i=i.slice()}if(u){f(u,n)}if(i){f(i,[e].concat(n))}}return t};f=function(t,e){var r,n,i,u,o,a;u=void 0;o=-1;a=t.length;r=e[0];n=e[1];i=e[2];switch(e.length){case 0:while(++o<a){(u=t[o]).callback.call(u.ctx)}return;case 1:while(++o<a){(u=t[o]).callback.call(u.ctx,r)}return;case 2:while(++o<a){(u=t[o]).callback.call(u.ctx,r,n)}return;case 3:while(++o<a){(u=t[o]).callback.call(u.ctx,r,n,i)}return;default:while(++o<a){(u=t[o]).callback.apply(u.ctx,e)}return}};t.dispatch=t.trigger}).call(this)},{}],3:[function(t,e,r){(function(){var r,n,i,u,o,a;r=t("./events");i=(typeof window!=="undefined"&&window!==null?window["Immutable"]:void 0)||t("immutable");n=function(){function t(){if(this instanceof t){this.initialize();return this}else{return new t}}t.prototype.initialize=function(){};t.prototype.datoms=i.Stack();t.prototype.historyIndex=0;t.prototype.history=i.List([i.Set()]);t.prototype.now=function(){return t.now()};t.prototype.at=function(e){if(e==="now"){e=void 0}return t.database(this,{max:e,min:void 0})};t.prototype.pull=function(t){return this.query({where:function(e){return e===t}})[0]};t.prototype.query=function(e){var r;if(e==null){e={}}r=e["at"];delete e["at"];e["in"]=this.at(r);return t.query(e)};t.prototype.transact=function(e,r){return t.transact(this,e,r)};t.prototype["true"]=function(t,e){var r,n;return this.transact(function(){var i;i=[];for(r in e){n=e[r];i.push([true,t,r,n])}return i}())};t.prototype["false"]=function(t,e){var r,n;return this.transact(function(){var i;i=[];for(r in e){n=e[r];i.push([false,t,r,n])}return i}())};t.prototype.undefined=function(t,e){var r,n;return this.transact(function(){var i;i=[];for(r in e){n=e[r];i.push([void 0,t,r,n])}return i}())};return t}();o=t("./events");for(u in o){a=o[u];n.prototype[u]=a}n.prototype.database=n.prototype.asOf=n.prototype.at;n.prototype.get=n.prototype.entity=n.prototype.recall=n.prototype.retrieve=n.prototype.pull;n.prototype.pleaseAnswerMyQuestion=n.prototype.query;n.prototype.commit=n.prototype.pushState=n.prototype.transact;n.prototype.divert=n.prototype.assert=n.prototype.add=n.prototype.advance=n.prototype["true"];n.prototype.revert=n.prototype.retract=n.prototype.subtract=n.prototype.reverse=n.prototype["false"];n.prototype.unsure=n.prototype.uncertain=n.prototype.unknown=n.prototype.undefined;n.Immutable=i;n.construct=n.apply;n.now=t("./now");n.database=t("./database");n.query=t("./query");n.transact=t("./transact");e.exports=n}).call(this)},{"./database":1,"./events":2,"./now":4,"./query":5,"./transact":6,immutable:7}],4:[function(t,e,r){(function(t){(function(){var r,n;e.exports=function(){var e,i;switch(false){case!((typeof window!=="undefined"&&window!==null?(e=window.performance)!=null?e.now:void 0:void 0)instanceof Function):return function(){return performance.timing.navigationStart+performance.now()};case!((typeof t!=="undefined"&&t!==null?(i=t.process)!=null?i.hrtime:void 0:void 0)instanceof Function):n=Date.now();r=function(){var e;e=t.process.hrtime();return e[0]*1e3+e[1]/1e6};return function(){return n+r()};default:throw"Facts couldn’t locate a high-resolution time source in this environment.\n\nA high-resolution time source is required to ensure transactions don’t fall\nout of the pocket and ruin that fine-fine monotonic grooviness. Facts checked\nfor window.performance.now and global.process.hrtime but neither of these\nfunctions was available."}}()}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(t,e,r){(function(){var r,n;r=t("immutable");e.exports=function(t){var e,r,i,u,o,a,s;e=t["in"];a=(s=t["out"])!=null?s:"list";o={};if(t["where"]){e=e.filter(function(e){return t["where"](e.get(1),e.get(2),e.get(3))})}r=e.reduce(n,{});if(a==="map"){return r}if(a==="list"){return function(){var t;t=[];for(u in r){i=r[u];t.push(i)}return t}()}throw"'"+a+"' is not a recognized query output format. Try out:'list' or out:'map'."};n=function(t,e){var r,n;if(t[r=e.get(1)]==null){t[r]={}}t[e.get(1)]["id"]=e.get(1);t[e.get(1)][e.get(2)]=(n=e.get(3)).toJS!=null?n.toJS():n;return t}}).call(this)},{immutable:7}],6:[function(t,e,r){(function(){var r,n,i,u;r=t("immutable");e.exports=function(t,e,o){var a,s,f,h,c,p;if(o==null){o=t.now()}if(typeof(e!=null?e.map:void 0)!=="function"){throw"Facts.transact can’t create a transaction without a list of input."}if(e.length===0){throw"Facts.transact can’t create a transaction with an empty list of input data."}p="T"+o;c={time:o};s=i.call(t);f=e.map(function(t){return r.fromJS([u(t[0]),n.call(this,t),t[2],t[3],o])});t.datoms=t.datoms.pushAll(f);t.datoms=t.datoms.pushAll(r.fromJS([[true,p,"time",o,o]]));t.history=t.history.push(a=t.at());t.historyIndex=t.history.count()-1;h={transaction:p,"db before":s,"db after":a,data:f};t.dispatch("transaction",h);return h};n=function(t){var e;e=t[1];if(e===void 0){return this.maxEntityId+=1}else{return e}};i=function(){if(this.history.last().hashCode()!==this.history.get(this.historyIndex).hashCode()){console.info("Pushing Old Database to end");this.history=this.history.push(this.history.get(this.historyIndex));this.historyIndex=history.count()-1;return this.history.last()}else{return this.history.last()}};u=function(t){if(t===true||t===false||t===void 0){return t}else{throw"Oops! '"+t+"' is not a recognized transaction operation. Try true, false or undefined."}}}).call(this)},{immutable:7}],7:[function(e,r,n){(function(e,i){typeof n==="object"&&typeof r!=="undefined"?r.exports=i():typeof t==="function"&&t.amd?t(i):e.Immutable=i()})(this,function(){"use strict";var t=Array.prototype.slice;function e(t,e){if(e){t.prototype=Object.create(e.prototype)}t.prototype.constructor=t}function r(t){return o(t)?t:V(t)}e(n,r);function n(t){return a(t)?t:Q(t)}e(i,r);function i(t){return s(t)?t:Y(t)}e(u,r);function u(t){return o(t)&&!f(t)?t:X(t)}function o(t){return!!(t&&t[c])}function a(t){return!!(t&&t[p])}function s(t){return!!(t&&t[l])}function f(t){return a(t)||s(t)}function h(t){return!!(t&&t[_])}r.isIterable=o;r.isKeyed=a;r.isIndexed=s;r.isAssociative=f;r.isOrdered=h;r.Keyed=n;r.Indexed=i;r.Set=u;var c="@@__IMMUTABLE_ITERABLE__@@";var p="@@__IMMUTABLE_KEYED__@@";var l="@@__IMMUTABLE_INDEXED__@@";var _="@@__IMMUTABLE_ORDERED__@@";var v="delete";var d=5;var y=1<<d;var m=y-1;var g={};var w={value:false};var I={value:false};function S(t){t.value=false;return t}function b(t){t&&(t.value=true)}function z(){}function x(t,e){e=e||0;var r=Math.max(0,t.length-e);var n=new Array(r);for(var i=0;i<r;i++){n[i]=t[i+e]}return n}function q(t){if(t.size===undefined){t.size=t.__iterate(D)}return t.size}function k(t,e){if(typeof e!=="number"){var r=e>>>0;if(""+r!==e||r===4294967295){return NaN}e=r}return e<0?q(t)+e:e}function D(){return true}function M(t,e,r){return(t===0||r!==undefined&&t<=-r)&&(e===undefined||r!==undefined&&e>=r)}function O(t,e){return A(t,e,0)}function E(t,e){return A(t,e,e)}function A(t,e,r){return t===undefined?r:t<0?Math.max(0,e+t):e===undefined?t:Math.min(e,t)}var j=0;var U=1;var K=2;var R=typeof Symbol==="function"&&Symbol.iterator;var T="@@iterator";var L=R||T;function W(t){this.next=t}W.prototype.toString=function(){return"[Iterator]"};W.KEYS=j;W.VALUES=U;W.ENTRIES=K;W.prototype.inspect=W.prototype.toSource=function(){return this.toString()};W.prototype[L]=function(){return this};function B(t,e,r,n){var i=t===0?e:t===1?r:[e,r];n?n.value=i:n={value:i,done:false};return n}function J(){return{value:undefined,done:true}}function C(t){return!!F(t)}function N(t){return t&&typeof t.next==="function"}function P(t){var e=F(t);return e&&e.call(t)}function F(t){var e=t&&(R&&t[R]||t[T]);if(typeof e==="function"){return e}}function H(t){return t&&typeof t.length==="number"}e(V,r);function V(t){return t===null||t===undefined?it():o(t)?t.toSeq():at(t)}V.of=function(){return V(arguments)};V.prototype.toSeq=function(){return this};V.prototype.toString=function(){return this.__toString("Seq {","}")};V.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length}return this};V.prototype.__iterate=function(t,e){return ft(this,t,e,true)};V.prototype.__iterator=function(t,e){return ht(this,t,e,true)};e(Q,V);function Q(t){return t===null||t===undefined?it().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():ut(t)}Q.prototype.toKeyedSeq=function(){return this};e(Y,V);function Y(t){return t===null||t===undefined?it():!o(t)?ot(t):a(t)?t.entrySeq():t.toIndexedSeq()}Y.of=function(){return Y(arguments)};Y.prototype.toIndexedSeq=function(){return this};Y.prototype.toString=function(){return this.__toString("Seq [","]")};Y.prototype.__iterate=function(t,e){return ft(this,t,e,false)};Y.prototype.__iterator=function(t,e){return ht(this,t,e,false)};e(X,V);function X(t){return(t===null||t===undefined?it():!o(t)?ot(t):a(t)?t.entrySeq():t).toSetSeq()}X.of=function(){return X(arguments)};X.prototype.toSetSeq=function(){return this};V.isSeq=rt;V.Keyed=Q;V.Set=X;V.Indexed=Y;var G="@@__IMMUTABLE_SEQ__@@";V.prototype[G]=true;e(Z,Y);function Z(t){this._array=t;this.size=t.length}Z.prototype.get=function(t,e){return this.has(t)?this._array[k(this,t)]:e};Z.prototype.__iterate=function(t,e){var r=this._array;var n=r.length-1;for(var i=0;i<=n;i++){if(t(r[e?n-i:i],i,this)===false){return i+1}}return i};Z.prototype.__iterator=function(t,e){var r=this._array;var n=r.length-1;var i=0;return new W(function(){return i>n?J():B(t,i,r[e?n-i++:i++])})};e($,Q);function $(t){var e=Object.keys(t);this._object=t;this._keys=e;this.size=e.length}$.prototype.get=function(t,e){if(e!==undefined&&!this.has(t)){return e}return this._object[t]};$.prototype.has=function(t){return this._object.hasOwnProperty(t)};$.prototype.__iterate=function(t,e){var r=this._object;var n=this._keys;var i=n.length-1;for(var u=0;u<=i;u++){var o=n[e?i-u:u];if(t(r[o],o,this)===false){return u+1}}return u};$.prototype.__iterator=function(t,e){var r=this._object;var n=this._keys;var i=n.length-1;var u=0;return new W(function(){var o=n[e?i-u:u];return u++>i?J():B(t,o,r[o])})};$.prototype[_]=true;e(tt,Y);function tt(t){this._iterable=t;this.size=t.length||t.size}tt.prototype.__iterateUncached=function(t,e){if(e){return this.cacheResult().__iterate(t,e)}var r=this._iterable;var n=P(r);var i=0;if(N(n)){var u;while(!(u=n.next()).done){if(t(u.value,i++,this)===false){break}}}return i};tt.prototype.__iteratorUncached=function(t,e){if(e){return this.cacheResult().__iterator(t,e)}var r=this._iterable;var n=P(r);if(!N(n)){return new W(J)}var i=0;return new W(function(){var e=n.next();return e.done?e:B(t,i++,e.value)})};e(et,Y);function et(t){this._iterator=t;this._iteratorCache=[]}et.prototype.__iterateUncached=function(t,e){if(e){return this.cacheResult().__iterate(t,e)}var r=this._iterator;var n=this._iteratorCache;var i=0;while(i<n.length){if(t(n[i],i++,this)===false){return i}}var u;while(!(u=r.next()).done){var o=u.value;n[i]=o;if(t(o,i++,this)===false){break}}return i};et.prototype.__iteratorUncached=function(t,e){if(e){return this.cacheResult().__iterator(t,e)}var r=this._iterator;var n=this._iteratorCache;var i=0;return new W(function(){if(i>=n.length){var e=r.next();if(e.done){return e}n[i]=e.value}return B(t,i,n[i++])})};function rt(t){return!!(t&&t[G])}var nt;function it(){return nt||(nt=new Z([]))}function ut(t){var e=Array.isArray(t)?new Z(t).fromEntrySeq():N(t)?new et(t).fromEntrySeq():C(t)?new tt(t).fromEntrySeq():typeof t==="object"?new $(t):undefined;if(!e){throw new TypeError("Expected Array or iterable object of [k, v] entries, "+"or keyed object: "+t)}return e}function ot(t){var e=st(t);if(!e){throw new TypeError("Expected Array or iterable object of values: "+t)}return e}function at(t){var e=st(t)||typeof t==="object"&&new $(t);if(!e){throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t)}return e}function st(t){return H(t)?new Z(t):N(t)?new et(t):C(t)?new tt(t):undefined}function ft(t,e,r,n){var i=t._cache;if(i){var u=i.length-1;for(var o=0;o<=u;o++){var a=i[r?u-o:o];if(e(a[1],n?a[0]:o,t)===false){return o+1}}return o}return t.__iterateUncached(e,r)}function ht(t,e,r,n){var i=t._cache;if(i){var u=i.length-1;var o=0;return new W(function(){var t=i[r?u-o:o];return o++>u?J():B(e,n?t[0]:o-1,t[1])})}return t.__iteratorUncached(e,r)}function ct(t,e){return e?pt(e,t,"",{"":t}):lt(t)}function pt(t,e,r,n){if(Array.isArray(e)){return t.call(n,r,Y(e).map(function(r,n){return pt(t,r,n,e)}))}if(_t(e)){return t.call(n,r,Q(e).map(function(r,n){return pt(t,r,n,e)}))}return e}function lt(t){if(Array.isArray(t)){return Y(t).map(lt).toList()}if(_t(t)){return Q(t).map(lt).toMap()}return t}function _t(t){return t&&(t.constructor===Object||t.constructor===undefined)}function vt(t,e){if(t===e||t!==t&&e!==e){return true}if(!t||!e){return false}if(typeof t.valueOf==="function"&&typeof e.valueOf==="function"){t=t.valueOf();e=e.valueOf();if(t===e||t!==t&&e!==e){return true}if(!t||!e){return false}}if(typeof t.equals==="function"&&typeof e.equals==="function"&&t.equals(e)){return true}return false}function dt(t,e){if(t===e){return true}if(!o(e)||t.size!==undefined&&e.size!==undefined&&t.size!==e.size||t.__hash!==undefined&&e.__hash!==undefined&&t.__hash!==e.__hash||a(t)!==a(e)||s(t)!==s(e)||h(t)!==h(e)){return false}if(t.size===0&&e.size===0){return true}var r=!f(t);if(h(t)){var n=t.entries();return e.every(function(t,e){var i=n.next().value;return i&&vt(i[1],t)&&(r||vt(i[0],e))})&&n.next().done}var i=false;if(t.size===undefined){if(e.size===undefined){if(typeof t.cacheResult==="function"){t.cacheResult()}}else{i=true;var u=t;t=e;e=u}}var c=true;var p=e.__iterate(function(e,n){if(r?!t.has(e):i?!vt(e,t.get(n,g)):!vt(t.get(n,g),e)){c=false;return false}});return c&&t.size===p}e(yt,Y);function yt(t,e){if(!(this instanceof yt)){return new yt(t,e)}this._value=t;this.size=e===undefined?Infinity:Math.max(0,e);if(this.size===0){if(mt){return mt}mt=this}}yt.prototype.toString=function(){if(this.size===0){return"Repeat []"}return"Repeat [ "+this._value+" "+this.size+" times ]"};yt.prototype.get=function(t,e){return this.has(t)?this._value:e};yt.prototype.includes=function(t){return vt(this._value,t)};yt.prototype.slice=function(t,e){var r=this.size;return M(t,e,r)?this:new yt(this._value,E(e,r)-O(t,r))};yt.prototype.reverse=function(){return this};yt.prototype.indexOf=function(t){if(vt(this._value,t)){return 0}return-1};yt.prototype.lastIndexOf=function(t){if(vt(this._value,t)){return this.size}return-1};yt.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++){if(t(this._value,r,this)===false){return r+1}}return r};yt.prototype.__iterator=function(t,e){var r=this;var n=0;return new W(function(){return n<r.size?B(t,n++,r._value):J()})};yt.prototype.equals=function(t){return t instanceof yt?vt(this._value,t._value):dt(t)};var mt;function gt(t,e){if(!t)throw new Error(e)}e(wt,Y);function wt(t,e,r){if(!(this instanceof wt)){return new wt(t,e,r)}gt(r!==0,"Cannot step a Range by 0");t=t||0;if(e===undefined){e=Infinity}r=r===undefined?1:Math.abs(r);if(e<t){r=-r}this._start=t;this._end=e;this._step=r;this.size=Math.max(0,Math.ceil((e-t)/r-1)+1);if(this.size===0){if(It){return It}It=this}}wt.prototype.toString=function(){if(this.size===0){return"Range []"}return"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"};wt.prototype.get=function(t,e){return this.has(t)?this._start+k(this,t)*this._step:e};wt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)};wt.prototype.slice=function(t,e){if(M(t,e,this.size)){return this}t=O(t,this.size);e=E(e,this.size);if(e<=t){return new wt(0,0)}return new wt(this.get(t,this._end),this.get(e,this._end),this._step)};wt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&r<this.size){return r}}return-1};wt.prototype.lastIndexOf=function(t){return this.indexOf(t)};wt.prototype.__iterate=function(t,e){var r=this.size-1;var n=this._step;var i=e?this._start+r*n:this._start;for(var u=0;u<=r;u++){if(t(i,u,this)===false){return u+1}i+=e?-n:n}return u};wt.prototype.__iterator=function(t,e){var r=this.size-1;var n=this._step;var i=e?this._start+r*n:this._start;var u=0;return new W(function(){var o=i;i+=e?-n:n;return u>r?J():B(t,u++,o)})};wt.prototype.equals=function(t){return t instanceof wt?this._start===t._start&&this._end===t._end&&this._step===t._step:dt(this,t)};var It;e(St,r);function St(){throw TypeError("Abstract")}e(bt,St);function bt(){}e(zt,St);function zt(){}e(xt,St);function xt(){}St.Keyed=bt;St.Indexed=zt;St.Set=xt;var qt=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function t(e,r){e=e|0;r=r|0;var n=e&65535;var i=r&65535;return n*i+((e>>>16)*i+n*(r>>>16)<<16>>>0)|0};function kt(t){return t>>>1&1073741824|t&3221225471}function Dt(t){if(t===false||t===null||t===undefined){return 0}if(typeof t.valueOf==="function"){t=t.valueOf();if(t===false||t===null||t===undefined){return 0}}if(t===true){return 1}var e=typeof t;if(e==="number"){var r=t|0;if(r!==t){r^=t*4294967295}while(t>4294967295){t/=4294967295;r^=t}return kt(r)}if(e==="string"){return t.length>Wt?Mt(t):Ot(t)}if(typeof t.hashCode==="function"){return t.hashCode()}if(e==="object"){return Et(t)}if(typeof t.toString==="function"){return Ot(t.toString())}throw new Error("Value type "+e+" cannot be hashed.")}function Mt(t){var e=Ct[t];if(e===undefined){e=Ot(t);if(Jt===Bt){Jt=0;Ct={}}Jt++;Ct[t]=e}return e}function Ot(t){var e=0;for(var r=0;r<t.length;r++){e=31*e+t.charCodeAt(r)|0}return kt(e)}function Et(t){var e;if(Kt){e=Rt.get(t);if(e!==undefined){return e}}e=t[Lt];if(e!==undefined){return e}if(!jt){e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Lt];if(e!==undefined){return e}e=Ut(t);if(e!==undefined){return e}}e=++Tt;if(Tt&1073741824){Tt=0}if(Kt){Rt.set(t,e)}else if(At!==undefined&&At(t)===false){throw new Error("Non-extensible objects are not allowed as keys.")}else if(jt){Object.defineProperty(t,Lt,{enumerable:false,configurable:false,writable:false,value:e})}else if(t.propertyIsEnumerable!==undefined&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable){t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)};t.propertyIsEnumerable[Lt]=e}else if(t.nodeType!==undefined){t[Lt]=e}else{throw new Error("Unable to set a non-enumerable property on object.")}return e}var At=Object.isExtensible;var jt=function(){try{Object.defineProperty({},"@",{});return true}catch(t){return false}}();function Ut(t){if(t&&t.nodeType>0){switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}}var Kt=typeof WeakMap==="function";var Rt;if(Kt){Rt=new WeakMap}var Tt=0;var Lt="__immutablehash__";if(typeof Symbol==="function"){Lt=Symbol(Lt)}var Wt=16;var Bt=255;var Jt=0;var Ct={};function Nt(t){gt(t!==Infinity,"Cannot perform this action with an infinite size.")}e(Pt,bt);function Pt(t){return t===null||t===undefined?ie():Ft(t)&&!h(t)?t:ie().withMutations(function(e){var r=n(t);Nt(r.size);r.forEach(function(t,r){return e.set(r,t)})})}Pt.of=function(){var e=t.call(arguments,0);return ie().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length){throw new Error("Missing value for key: "+e[r])}t.set(e[r],e[r+1])}})};Pt.prototype.toString=function(){return this.__toString("Map {","}")};Pt.prototype.get=function(t,e){return this._root?this._root.get(0,undefined,t,e):e};Pt.prototype.set=function(t,e){return ue(this,t,e)};Pt.prototype.setIn=function(t,e){return this.updateIn(t,g,function(){return e})};Pt.prototype.remove=function(t){return ue(this,t,g)};Pt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return g})};Pt.prototype.update=function(t,e,r){return arguments.length===1?t(this):this.updateIn([t],e,r)};Pt.prototype.updateIn=function(t,e,r){if(!r){r=e;e=undefined}var n=de(this,Ir(t),e,r);return n===g?undefined:n};Pt.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._root=null;this.__hash=undefined;this.__altered=true;return this}return ie()};Pt.prototype.merge=function(){return pe(this,undefined,arguments)};Pt.prototype.mergeWith=function(e){var r=t.call(arguments,1);return pe(this,e,r)};Pt.prototype.mergeIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,ie(),function(t){return typeof t.merge==="function"?t.merge.apply(t,r):r[r.length-1]})};Pt.prototype.mergeDeep=function(){return pe(this,le,arguments)};Pt.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return pe(this,_e(e),r)};Pt.prototype.mergeDeepIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,ie(),function(t){return typeof t.mergeDeep==="function"?t.mergeDeep.apply(t,r):r[r.length-1]})};Pt.prototype.sort=function(t){return Je(hr(this,t))};Pt.prototype.sortBy=function(t,e){return Je(hr(this,e,t))};Pt.prototype.withMutations=function(t){var e=this.asMutable();t(e);return e.wasAltered()?e.__ensureOwner(this.__ownerID):this};Pt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new z)};Pt.prototype.asImmutable=function(){return this.__ensureOwner()};Pt.prototype.wasAltered=function(){return this.__altered};Pt.prototype.__iterator=function(t,e){return new $t(this,t,e)};Pt.prototype.__iterate=function(t,e){var r=this;var n=0;this._root&&this._root.iterate(function(e){n++;return t(e[1],e[0],r)},e);return n};Pt.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}if(!t){this.__ownerID=t;this.__altered=false;return this}return re(this.size,this._root,t,this.__hash)};function Ft(t){return!!(t&&t[Ht])}Pt.isMap=Ft;var Ht="@@__IMMUTABLE_MAP__@@";var Vt=Pt.prototype;Vt[Ht]=true;Vt[v]=Vt.remove;Vt.removeIn=Vt.deleteIn;function Qt(t,e){this.ownerID=t;this.entries=e}Qt.prototype.get=function(t,e,r,n){var i=this.entries;for(var u=0,o=i.length;u<o;u++){if(vt(r,i[u][0])){return i[u][1]}}return n};Qt.prototype.update=function(t,e,r,n,i,u,o){var a=i===g;var s=this.entries;var f=0;for(var h=s.length;f<h;f++){if(vt(n,s[f][0])){break}}var c=f<h;if(c?s[f][1]===i:a){return this}b(o);(a||!c)&&b(u);if(a&&s.length===1){return}if(!c&&!a&&s.length>=Ie){return fe(t,s,n,i)}var p=t&&t===this.ownerID;var l=p?s:x(s);if(c){if(a){f===h-1?l.pop():l[f]=l.pop()}else{l[f]=[n,i]}}else{l.push([n,i])}if(p){this.entries=l;return this}return new Qt(t,l)};function Yt(t,e,r){this.ownerID=t;this.bitmap=e;this.nodes=r}Yt.prototype.get=function(t,e,r,n){if(e===undefined){e=Dt(r)}var i=1<<((t===0?e:e>>>t)&m);var u=this.bitmap;return(u&i)===0?n:this.nodes[ye(u&i-1)].get(t+d,e,r,n)};Yt.prototype.update=function(t,e,r,n,i,u,o){if(r===undefined){r=Dt(n)}var a=(e===0?r:r>>>e)&m;var s=1<<a;var f=this.bitmap;var h=(f&s)!==0;if(!h&&i===g){return this}var c=ye(f&s-1);var p=this.nodes;var l=h?p[c]:undefined;var _=oe(l,t,e+d,r,n,i,u,o);if(_===l){return this}if(!h&&_&&p.length>=Se){return ce(t,p,f,a,_)}if(h&&!_&&p.length===2&&ae(p[c^1])){return p[c^1]}if(h&&_&&p.length===1&&ae(_)){return _}var v=t&&t===this.ownerID;var y=h?_?f:f^s:f|s;var w=h?_?me(p,c,_,v):we(p,c,v):ge(p,c,_,v);if(v){this.bitmap=y;this.nodes=w;return this}return new Yt(t,y,w)};function Xt(t,e,r){this.ownerID=t;this.count=e;this.nodes=r}Xt.prototype.get=function(t,e,r,n){if(e===undefined){e=Dt(r)}var i=(t===0?e:e>>>t)&m;var u=this.nodes[i];return u?u.get(t+d,e,r,n):n};Xt.prototype.update=function(t,e,r,n,i,u,o){if(r===undefined){r=Dt(n)}var a=(e===0?r:r>>>e)&m;var s=i===g;var f=this.nodes;var h=f[a];if(s&&!h){return this}var c=oe(h,t,e+d,r,n,i,u,o);if(c===h){return this}var p=this.count;if(!h){p++}else if(!c){p--;if(p<be){return he(t,f,p,a)}}var l=t&&t===this.ownerID;var _=me(f,a,c,l);if(l){this.count=p;this.nodes=_;return this}return new Xt(t,p,_)};function Gt(t,e,r){this.ownerID=t;this.keyHash=e;this.entries=r}Gt.prototype.get=function(t,e,r,n){var i=this.entries;for(var u=0,o=i.length;u<o;u++){if(vt(r,i[u][0])){return i[u][1]}}return n};Gt.prototype.update=function(t,e,r,n,i,u,o){if(r===undefined){r=Dt(n)}var a=i===g;if(r!==this.keyHash){if(a){return this}b(o);b(u);return se(this,t,e,r,[n,i])}var s=this.entries;var f=0;for(var h=s.length;f<h;f++){if(vt(n,s[f][0])){break}}var c=f<h;if(c?s[f][1]===i:a){return this}b(o);(a||!c)&&b(u);if(a&&h===2){return new Zt(t,this.keyHash,s[f^1])}var p=t&&t===this.ownerID;var l=p?s:x(s);if(c){if(a){f===h-1?l.pop():l[f]=l.pop()}else{l[f]=[n,i]}}else{l.push([n,i])}if(p){this.entries=l;return this}return new Gt(t,this.keyHash,l)};function Zt(t,e,r){this.ownerID=t;this.keyHash=e;this.entry=r}Zt.prototype.get=function(t,e,r,n){return vt(r,this.entry[0])?this.entry[1]:n};Zt.prototype.update=function(t,e,r,n,i,u,o){var a=i===g;var s=vt(n,this.entry[0]);if(s?i===this.entry[1]:a){return this}b(o);if(a){b(u);return}if(s){if(t&&t===this.ownerID){this.entry[1]=i;return this}return new Zt(t,this.keyHash,[n,i])}b(u);return se(this,t,e,Dt(n),[n,i])};Qt.prototype.iterate=Gt.prototype.iterate=function(t,e){var r=this.entries;for(var n=0,i=r.length-1;n<=i;n++){if(t(r[e?i-n:n])===false){return false}}};Yt.prototype.iterate=Xt.prototype.iterate=function(t,e){var r=this.nodes;for(var n=0,i=r.length-1;n<=i;n++){var u=r[e?i-n:n];if(u&&u.iterate(t,e)===false){return false}}};Zt.prototype.iterate=function(t,e){return t(this.entry)};e($t,W);function $t(t,e,r){this._type=e;this._reverse=r;this._stack=t._root&&ee(t._root)}$t.prototype.next=function(){var t=this._type;var e=this._stack;while(e){var r=e.node;var n=e.index++;var i;if(r.entry){if(n===0){return te(t,r.entry)}}else if(r.entries){i=r.entries.length-1;if(n<=i){return te(t,r.entries[this._reverse?i-n:n])}}else{i=r.nodes.length-1;if(n<=i){var u=r.nodes[this._reverse?i-n:n];if(u){if(u.entry){return te(t,u.entry)}e=this._stack=ee(u,e)}continue}}e=this._stack=this._stack.__prev}return J()};function te(t,e){return B(t,e[0],e[1])}function ee(t,e){return{node:t,index:0,__prev:e}}function re(t,e,r,n){var i=Object.create(Vt);i.size=t;i._root=e;i.__ownerID=r;i.__hash=n;i.__altered=false;return i}var ne;function ie(){return ne||(ne=re(0))}function ue(t,e,r){var n;var i;if(!t._root){if(r===g){return t}i=1;n=new Qt(t.__ownerID,[[e,r]])}else{var u=S(w);var o=S(I);n=oe(t._root,t.__ownerID,0,undefined,e,r,u,o);if(!o.value){return t}i=t.size+(u.value?r===g?-1:1:0)}if(t.__ownerID){t.size=i;t._root=n;t.__hash=undefined;t.__altered=true;return t}return n?re(i,n):ie()}function oe(t,e,r,n,i,u,o,a){if(!t){if(u===g){return t}b(a);b(o);return new Zt(e,n,[i,u])}return t.update(e,r,n,i,u,o,a)}function ae(t){return t.constructor===Zt||t.constructor===Gt}function se(t,e,r,n,i){if(t.keyHash===n){return new Gt(e,n,[t.entry,i])}var u=(r===0?t.keyHash:t.keyHash>>>r)&m;var o=(r===0?n:n>>>r)&m;var a;var s=u===o?[se(t,e,r+d,n,i)]:(a=new Zt(e,n,i),u<o?[t,a]:[a,t]);return new Yt(e,1<<u|1<<o,s)}function fe(t,e,r,n){if(!t){t=new z}var i=new Zt(t,Dt(r),[r,n]);for(var u=0;u<e.length;u++){var o=e[u];i=i.update(t,0,undefined,o[0],o[1])}return i}function he(t,e,r,n){var i=0;var u=0;var o=new Array(r);for(var a=0,s=1,f=e.length;a<f;a++,s<<=1){var h=e[a];if(h!==undefined&&a!==n){i|=s;o[u++]=h}}return new Yt(t,i,o)}function ce(t,e,r,n,i){var u=0;var o=new Array(y);for(var a=0;r!==0;a++,r>>>=1){o[a]=r&1?e[u++]:undefined}o[n]=i;return new Xt(t,u+1,o)}function pe(t,e,r){var i=[];for(var u=0;u<r.length;u++){var a=r[u];var s=n(a);if(!o(a)){s=s.map(function(t){return ct(t)})}i.push(s)}return ve(t,e,i)}function le(t,e,r){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):vt(t,e)?t:e;
}function _e(t){return function(e,r,n){if(e&&e.mergeDeepWith&&o(r)){return e.mergeDeepWith(t,r)}var i=t(e,r,n);return vt(e,i)?e:i}}function ve(t,e,r){r=r.filter(function(t){return t.size!==0});if(r.length===0){return t}if(t.size===0&&!t.__ownerID&&r.length===1){return t.constructor(r[0])}return t.withMutations(function(t){var n=e?function(r,n){t.update(n,g,function(t){return t===g?r:e(t,r,n)})}:function(e,r){t.set(r,e)};for(var i=0;i<r.length;i++){r[i].forEach(n)}})}function de(t,e,r,n){var i=t===g;var u=e.next();if(u.done){var o=i?r:t;var a=n(o);return a===o?t:a}gt(i||t&&t.set,"invalid keyPath");var s=u.value;var f=i?g:t.get(s,g);var h=de(f,e,r,n);return h===f?t:h===g?t.remove(s):(i?ie():t).set(s,h)}function ye(t){t=t-(t>>1&1431655765);t=(t&858993459)+(t>>2&858993459);t=t+(t>>4)&252645135;t=t+(t>>8);t=t+(t>>16);return t&127}function me(t,e,r,n){var i=n?t:x(t);i[e]=r;return i}function ge(t,e,r,n){var i=t.length+1;if(n&&e+1===i){t[e]=r;return t}var u=new Array(i);var o=0;for(var a=0;a<i;a++){if(a===e){u[a]=r;o=-1}else{u[a]=t[a+o]}}return u}function we(t,e,r){var n=t.length-1;if(r&&e===n){t.pop();return t}var i=new Array(n);var u=0;for(var o=0;o<n;o++){if(o===e){u=1}i[o]=t[o+u]}return i}var Ie=y/4;var Se=y/2;var be=y/4;e(ze,zt);function ze(t){var e=je();if(t===null||t===undefined){return e}if(xe(t)){return t}var r=i(t);var n=r.size;if(n===0){return e}Nt(n);if(n>0&&n<y){return Ee(0,n,d,null,new De(r.toArray()))}return e.withMutations(function(t){t.setSize(n);r.forEach(function(e,r){return t.set(r,e)})})}ze.of=function(){return this(arguments)};ze.prototype.toString=function(){return this.__toString("List [","]")};ze.prototype.get=function(t,e){t=k(this,t);if(t>=0&&t<this.size){t+=this._origin;var r=Te(this,t);return r&&r.array[t&m]}return e};ze.prototype.set=function(t,e){return Ue(this,t,e)};ze.prototype.remove=function(t){return!this.has(t)?this:t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1)};ze.prototype.insert=function(t,e){return this.splice(t,0,e)};ze.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=d;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this}return je()};ze.prototype.push=function(){var t=arguments;var e=this.size;return this.withMutations(function(r){Le(r,0,e+t.length);for(var n=0;n<t.length;n++){r.set(e+n,t[n])}})};ze.prototype.pop=function(){return Le(this,0,-1)};ze.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Le(e,-t.length);for(var r=0;r<t.length;r++){e.set(r,t[r])}})};ze.prototype.shift=function(){return Le(this,1)};ze.prototype.merge=function(){return We(this,undefined,arguments)};ze.prototype.mergeWith=function(e){var r=t.call(arguments,1);return We(this,e,r)};ze.prototype.mergeDeep=function(){return We(this,le,arguments)};ze.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return We(this,_e(e),r)};ze.prototype.setSize=function(t){return Le(this,0,t)};ze.prototype.slice=function(t,e){var r=this.size;if(M(t,e,r)){return this}return Le(this,O(t,r),E(e,r))};ze.prototype.__iterator=function(t,e){var r=0;var n=Oe(this,e);return new W(function(){var e=n();return e===Me?J():B(t,r++,e)})};ze.prototype.__iterate=function(t,e){var r=0;var n=Oe(this,e);var i;while((i=n())!==Me){if(t(i,r++,this)===false){break}}return r};ze.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}if(!t){this.__ownerID=t;return this}return Ee(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash)};function xe(t){return!!(t&&t[qe])}ze.isList=xe;var qe="@@__IMMUTABLE_LIST__@@";var ke=ze.prototype;ke[qe]=true;ke[v]=ke.remove;ke.setIn=Vt.setIn;ke.deleteIn=ke.removeIn=Vt.removeIn;ke.update=Vt.update;ke.updateIn=Vt.updateIn;ke.mergeIn=Vt.mergeIn;ke.mergeDeepIn=Vt.mergeDeepIn;ke.withMutations=Vt.withMutations;ke.asMutable=Vt.asMutable;ke.asImmutable=Vt.asImmutable;ke.wasAltered=Vt.wasAltered;function De(t,e){this.array=t;this.ownerID=e}De.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0||this.array.length===0){return this}var n=r>>>e&m;if(n>=this.array.length){return new De([],t)}var i=n===0;var u;if(e>0){var o=this.array[n];u=o&&o.removeBefore(t,e-d,r);if(u===o&&i){return this}}if(i&&!u){return this}var a=Re(this,t);if(!i){for(var s=0;s<n;s++){a.array[s]=undefined}}if(u){a.array[n]=u}return a};De.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||this.array.length===0){return this}var n=r-1>>>e&m;if(n>=this.array.length){return this}var i;if(e>0){var u=this.array[n];i=u&&u.removeAfter(t,e-d,r);if(i===u&&n===this.array.length-1){return this}}var o=Re(this,t);o.array.splice(n+1);if(i){o.array[n]=i}return o};var Me={};function Oe(t,e){var r=t._origin;var n=t._capacity;var i=Be(n);var u=t._tail;return o(t._root,t._level,0);function o(t,e,r){return e===0?a(t,r):s(t,e,r)}function a(t,o){var a=o===i?u&&u.array:t&&t.array;var s=o>r?0:r-o;var f=n-o;if(f>y){f=y}return function(){if(s===f){return Me}var t=e?--f:s++;return a&&a[t]}}function s(t,i,u){var a;var s=t&&t.array;var f=u>r?0:r-u>>i;var h=(n-u>>i)+1;if(h>y){h=y}return function(){do{if(a){var t=a();if(t!==Me){return t}a=null}if(f===h){return Me}var r=e?--h:f++;a=o(s&&s[r],i-d,u+(r<<i))}while(true)}}}function Ee(t,e,r,n,i,u,o){var a=Object.create(ke);a.size=e-t;a._origin=t;a._capacity=e;a._level=r;a._root=n;a._tail=i;a.__ownerID=u;a.__hash=o;a.__altered=false;return a}var Ae;function je(){return Ae||(Ae=Ee(0,0,d))}function Ue(t,e,r){e=k(t,e);if(e!==e){return t}if(e>=t.size||e<0){return t.withMutations(function(t){e<0?Le(t,e).set(0,r):Le(t,0,e+1).set(e,r)})}e+=t._origin;var n=t._tail;var i=t._root;var u=S(I);if(e>=Be(t._capacity)){n=Ke(n,t.__ownerID,0,e,r,u)}else{i=Ke(i,t.__ownerID,t._level,e,r,u)}if(!u.value){return t}if(t.__ownerID){t._root=i;t._tail=n;t.__hash=undefined;t.__altered=true;return t}return Ee(t._origin,t._capacity,t._level,i,n)}function Ke(t,e,r,n,i,u){var o=n>>>r&m;var a=t&&o<t.array.length;if(!a&&i===undefined){return t}var s;if(r>0){var f=t&&t.array[o];var h=Ke(f,e,r-d,n,i,u);if(h===f){return t}s=Re(t,e);s.array[o]=h;return s}if(a&&t.array[o]===i){return t}b(u);s=Re(t,e);if(i===undefined&&o===s.array.length-1){s.array.pop()}else{s.array[o]=i}return s}function Re(t,e){if(e&&t&&e===t.ownerID){return t}return new De(t?t.array.slice():[],e)}function Te(t,e){if(e>=Be(t._capacity)){return t._tail}if(e<1<<t._level+d){var r=t._root;var n=t._level;while(r&&n>0){r=r.array[e>>>n&m];n-=d}return r}}function Le(t,e,r){if(e!==undefined){e=e|0}if(r!==undefined){r=r|0}var n=t.__ownerID||new z;var i=t._origin;var u=t._capacity;var o=i+e;var a=r===undefined?u:r<0?u+r:i+r;if(o===i&&a===u){return t}if(o>=a){return t.clear()}var s=t._level;var f=t._root;var h=0;while(o+h<0){f=new De(f&&f.array.length?[undefined,f]:[],n);s+=d;h+=1<<s}if(h){o+=h;i+=h;a+=h;u+=h}var c=Be(u);var p=Be(a);while(p>=1<<s+d){f=new De(f&&f.array.length?[f]:[],n);s+=d}var l=t._tail;var _=p<c?Te(t,a-1):p>c?new De([],n):l;if(l&&p>c&&o<u&&l.array.length){f=Re(f,n);var v=f;for(var y=s;y>d;y-=d){var g=c>>>y&m;v=v.array[g]=Re(v.array[g],n)}v.array[c>>>d&m]=l}if(a<u){_=_&&_.removeAfter(n,0,a)}if(o>=p){o-=p;a-=p;s=d;f=null;_=_&&_.removeBefore(n,0,o)}else if(o>i||p<c){h=0;while(f){var w=o>>>s&m;if(w!==p>>>s&m){break}if(w){h+=(1<<s)*w}s-=d;f=f.array[w]}if(f&&o>i){f=f.removeBefore(n,s,o-h)}if(f&&p<c){f=f.removeAfter(n,s,p-h)}if(h){o-=h;a-=h}}if(t.__ownerID){t.size=a-o;t._origin=o;t._capacity=a;t._level=s;t._root=f;t._tail=_;t.__hash=undefined;t.__altered=true;return t}return Ee(o,a,s,f,_)}function We(t,e,r){var n=[];var u=0;for(var a=0;a<r.length;a++){var s=r[a];var f=i(s);if(f.size>u){u=f.size}if(!o(s)){f=f.map(function(t){return ct(t)})}n.push(f)}if(u>t.size){t=t.setSize(u)}return ve(t,e,n)}function Be(t){return t<y?0:t-1>>>d<<d}e(Je,Pt);function Je(t){return t===null||t===undefined?Fe():Ce(t)?t:Fe().withMutations(function(e){var r=n(t);Nt(r.size);r.forEach(function(t,r){return e.set(r,t)})})}Je.of=function(){return this(arguments)};Je.prototype.toString=function(){return this.__toString("OrderedMap {","}")};Je.prototype.get=function(t,e){var r=this._map.get(t);return r!==undefined?this._list.get(r)[1]:e};Je.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return Fe()};Je.prototype.set=function(t,e){return He(this,t,e)};Je.prototype.remove=function(t){return He(this,t,g)};Je.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};Je.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)};Je.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)};Je.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}var e=this._map.__ensureOwner(t);var r=this._list.__ensureOwner(t);if(!t){this.__ownerID=t;this._map=e;this._list=r;return this}return Ne(e,r,t,this.__hash)};function Ce(t){return Ft(t)&&h(t)}Je.isOrderedMap=Ce;Je.prototype[_]=true;Je.prototype[v]=Je.prototype.remove;function Ne(t,e,r,n){var i=Object.create(Je.prototype);i.size=t?t.size:0;i._map=t;i._list=e;i.__ownerID=r;i.__hash=n;return i}var Pe;function Fe(){return Pe||(Pe=Ne(ie(),je()))}function He(t,e,r){var n=t._map;var i=t._list;var u=n.get(e);var o=u!==undefined;var a;var s;if(r===g){if(!o){return t}if(i.size>=y&&i.size>=n.size*2){s=i.filter(function(t,e){return t!==undefined&&u!==e});a=s.toKeyedSeq().map(function(t){return t[0]}).flip().toMap();if(t.__ownerID){a.__ownerID=s.__ownerID=t.__ownerID}}else{a=n.remove(e);s=u===i.size-1?i.pop():i.set(u,undefined)}}else{if(o){if(r===i.get(u)[1]){return t}a=n;s=i.set(u,[e,r])}else{a=n.set(e,i.size);s=i.set(i.size,[e,r])}}if(t.__ownerID){t.size=a.size;t._map=a;t._list=s;t.__hash=undefined;return t}return Ne(a,s)}e(Ve,Q);function Ve(t,e){this._iter=t;this._useKeys=e;this.size=t.size}Ve.prototype.get=function(t,e){return this._iter.get(t,e)};Ve.prototype.has=function(t){return this._iter.has(t)};Ve.prototype.valueSeq=function(){return this._iter.valueSeq()};Ve.prototype.reverse=function(){var t=this;var e=$e(this,true);if(!this._useKeys){e.valueSeq=function(){return t._iter.toSeq().reverse()}}return e};Ve.prototype.map=function(t,e){var r=this;var n=Ze(this,t,e);if(!this._useKeys){n.valueSeq=function(){return r._iter.toSeq().map(t,e)}}return n};Ve.prototype.__iterate=function(t,e){var r=this;var n;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?dr(this):0,function(i){return t(i,e?--n:n++,r)}),e)};Ve.prototype.__iterator=function(t,e){if(this._useKeys){return this._iter.__iterator(t,e)}var r=this._iter.__iterator(U,e);var n=e?dr(this):0;return new W(function(){var i=r.next();return i.done?i:B(t,e?--n:n++,i.value,i)})};Ve.prototype[_]=true;e(Qe,Y);function Qe(t){this._iter=t;this.size=t.size}Qe.prototype.includes=function(t){return this._iter.includes(t)};Qe.prototype.__iterate=function(t,e){var r=this;var n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)};Qe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(U,e);var n=0;return new W(function(){var e=r.next();return e.done?e:B(t,n++,e.value,e)})};e(Ye,X);function Ye(t){this._iter=t;this.size=t.size}Ye.prototype.has=function(t){return this._iter.includes(t)};Ye.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)};Ye.prototype.__iterator=function(t,e){var r=this._iter.__iterator(U,e);return new W(function(){var e=r.next();return e.done?e:B(t,e.value,e.value,e)})};e(Xe,Q);function Xe(t){this._iter=t;this.size=t.size}Xe.prototype.entrySeq=function(){return this._iter.toSeq()};Xe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){vr(e);var n=o(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)};Xe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(U,e);return new W(function(){while(true){var e=r.next();if(e.done){return e}var n=e.value;if(n){vr(n);var i=o(n);return B(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}})};Qe.prototype.cacheResult=Ve.prototype.cacheResult=Ye.prototype.cacheResult=Xe.prototype.cacheResult=gr;function Ge(t){var e=mr(t);e._iter=t;e.size=t.size;e.flip=function(){return t};e.reverse=function(){var e=t.reverse.apply(this);e.flip=function(){return t.reverse()};return e};e.has=function(e){return t.includes(e)};e.includes=function(e){return t.has(e)};e.cacheResult=gr;e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return e(r,t,n)!==false},r)};e.__iteratorUncached=function(e,r){if(e===K){var n=t.__iterator(e,r);return new W(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1];t.value[1]=e}return t})}return t.__iterator(e===U?j:U,r)};return e}function Ze(t,e,r){var n=mr(t);n.size=t.size;n.has=function(e){return t.has(e)};n.get=function(n,i){var u=t.get(n,g);return u===g?i:e.call(r,u,n,t)};n.__iterateUncached=function(n,i){var u=this;return t.__iterate(function(t,i,o){return n(e.call(r,t,i,o),i,u)!==false},i)};n.__iteratorUncached=function(n,i){var u=t.__iterator(K,i);return new W(function(){var i=u.next();if(i.done){return i}var o=i.value;var a=o[0];return B(n,a,e.call(r,o[1],a,t),i)})};return n}function $e(t,e){var r=mr(t);r._iter=t;r.size=t.size;r.reverse=function(){return t};if(t.flip){r.flip=function(){var e=Ge(t);e.reverse=function(){return t.flip()};return e}}r.get=function(r,n){return t.get(e?r:-1-r,n)};r.has=function(r){return t.has(e?r:-1-r)};r.includes=function(e){return t.includes(e)};r.cacheResult=gr;r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)};r.__iterator=function(e,r){return t.__iterator(e,!r)};return r}function tr(t,e,r,n){var i=mr(t);if(n){i.has=function(n){var i=t.get(n,g);return i!==g&&!!e.call(r,i,n,t)};i.get=function(n,i){var u=t.get(n,g);return u!==g&&e.call(r,u,n,t)?u:i}}i.__iterateUncached=function(i,u){var o=this;var a=0;t.__iterate(function(t,u,s){if(e.call(r,t,u,s)){a++;return i(t,n?u:a-1,o)}},u);return a};i.__iteratorUncached=function(i,u){var o=t.__iterator(K,u);var a=0;return new W(function(){while(true){var u=o.next();if(u.done){return u}var s=u.value;var f=s[0];var h=s[1];if(e.call(r,h,f,t)){return B(i,n?f:a++,h,u)}}})};return i}function er(t,e,r){var n=Pt().asMutable();t.__iterate(function(i,u){n.update(e.call(r,i,u,t),0,function(t){return t+1})});return n.asImmutable()}function rr(t,e,r){var n=a(t);var i=(h(t)?Je():Pt()).asMutable();t.__iterate(function(u,o){i.update(e.call(r,u,o,t),function(t){return t=t||[],t.push(n?[o,u]:u),t})});var u=yr(t);return i.map(function(e){return _r(t,u(e))})}function nr(t,e,r,n){var i=t.size;if(e!==undefined){e=e|0}if(r!==undefined){if(r===Infinity){r=i}else{r=r|0}}if(M(e,r,i)){return t}var u=O(e,i);var o=E(r,i);if(u!==u||o!==o){return nr(t.toSeq().cacheResult(),e,r,n)}var a=o-u;var s;if(a===a){s=a<0?0:a}var f=mr(t);f.size=s===0?s:t.size&&s||undefined;if(!n&&rt(t)&&s>=0){f.get=function(e,r){e=k(this,e);return e>=0&&e<s?t.get(e+u,r):r}}f.__iterateUncached=function(e,r){var i=this;if(s===0){return 0}if(r){return this.cacheResult().__iterate(e,r)}var o=0;var a=true;var f=0;t.__iterate(function(t,r){if(!(a&&(a=o++<u))){f++;return e(t,n?r:f-1,i)!==false&&f!==s}});return f};f.__iteratorUncached=function(e,r){if(s!==0&&r){return this.cacheResult().__iterator(e,r)}var i=s!==0&&t.__iterator(e,r);var o=0;var a=0;return new W(function(){while(o++<u){i.next()}if(++a>s){return J()}var t=i.next();if(n||e===U){return t}else if(e===j){return B(e,a-1,undefined,t)}else{return B(e,a-1,t.value[1],t)}})};return f}function ir(t,e,r){var n=mr(t);n.__iterateUncached=function(n,i){var u=this;if(i){return this.cacheResult().__iterate(n,i)}var o=0;t.__iterate(function(t,i,a){return e.call(r,t,i,a)&&++o&&n(t,i,u)});return o};n.__iteratorUncached=function(n,i){var u=this;if(i){return this.cacheResult().__iterator(n,i)}var o=t.__iterator(K,i);var a=true;return new W(function(){if(!a){return J()}var t=o.next();if(t.done){return t}var i=t.value;var s=i[0];var f=i[1];if(!e.call(r,f,s,u)){a=false;return J()}return n===K?t:B(n,s,f,t)})};return n}function ur(t,e,r,n){var i=mr(t);i.__iterateUncached=function(i,u){var o=this;if(u){return this.cacheResult().__iterate(i,u)}var a=true;var s=0;t.__iterate(function(t,u,f){if(!(a&&(a=e.call(r,t,u,f)))){s++;return i(t,n?u:s-1,o)}});return s};i.__iteratorUncached=function(i,u){var o=this;if(u){return this.cacheResult().__iterator(i,u)}var a=t.__iterator(K,u);var s=true;var f=0;return new W(function(){var t,u,h;do{t=a.next();if(t.done){if(n||i===U){return t}else if(i===j){return B(i,f++,undefined,t)}else{return B(i,f++,t.value[1],t)}}var c=t.value;u=c[0];h=c[1];s&&(s=e.call(r,h,u,o))}while(s);return i===K?t:B(i,u,h,t)})};return i}function or(t,e){var r=a(t);var i=[t].concat(e).map(function(t){if(!o(t)){t=r?ut(t):ot(Array.isArray(t)?t:[t])}else if(r){t=n(t)}return t}).filter(function(t){return t.size!==0});if(i.length===0){return t}if(i.length===1){var u=i[0];if(u===t||r&&a(u)||s(t)&&s(u)){return u}}var f=new Z(i);if(r){f=f.toKeyedSeq()}else if(!s(t)){f=f.toSetSeq()}f=f.flatten(true);f.size=i.reduce(function(t,e){if(t!==undefined){var r=e.size;if(r!==undefined){return t+r}}},0);return f}function ar(t,e,r){var n=mr(t);n.__iterateUncached=function(n,i){var u=0;var a=false;function s(t,f){var h=this;t.__iterate(function(t,i){if((!e||f<e)&&o(t)){s(t,f+1)}else if(n(t,r?i:u++,h)===false){a=true}return!a},i)}s(t,0);return u};n.__iteratorUncached=function(n,i){var u=t.__iterator(n,i);var a=[];var s=0;return new W(function(){while(u){var t=u.next();if(t.done!==false){u=a.pop();continue}var f=t.value;if(n===K){f=f[1]}if((!e||a.length<e)&&o(f)){a.push(u);u=f.__iterator(n,i)}else{return r?t:B(n,s++,f,t)}}return J()})};return n}function sr(t,e,r){var n=yr(t);return t.toSeq().map(function(i,u){return n(e.call(r,i,u,t))}).flatten(true)}function fr(t,e){var r=mr(t);r.size=t.size&&t.size*2-1;r.__iterateUncached=function(r,n){var i=this;var u=0;t.__iterate(function(t,n){return(!u||r(e,u++,i)!==false)&&r(t,u++,i)!==false},n);return u};r.__iteratorUncached=function(r,n){var i=t.__iterator(U,n);var u=0;var o;return new W(function(){if(!o||u%2){o=i.next();if(o.done){return o}}return u%2?B(r,u++,e):B(r,u++,o.value,o)})};return r}function hr(t,e,r){if(!e){e=wr}var n=a(t);var i=0;var u=t.toSeq().map(function(e,n){return[n,e,i++,r?r(e,n,t):e]}).toArray();u.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){u[e].length=2}:function(t,e){u[e]=t[1]});return n?Q(u):s(t)?Y(u):X(u)}function cr(t,e,r){if(!e){e=wr}if(r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return pr(e,t[1],r[1])?r:t});return n&&n[0]}else{return t.reduce(function(t,r){return pr(e,t,r)?r:t})}}function pr(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r===undefined||r===null||r!==r)||n>0}function lr(t,e,n){var i=mr(t);i.size=new Z(n).map(function(t){return t.size}).min();i.__iterate=function(t,e){var r=this.__iterator(U,e);var n;var i=0;while(!(n=r.next()).done){if(t(n.value,i++,this)===false){break}}return i};i.__iteratorUncached=function(t,i){var u=n.map(function(t){return t=r(t),P(i?t.reverse():t)});var o=0;var a=false;return new W(function(){var r;if(!a){r=u.map(function(t){return t.next()});a=r.some(function(t){return t.done})}if(a){return J()}return B(t,o++,e.apply(null,r.map(function(t){return t.value})))})};return i}function _r(t,e){return rt(t)?e:t.constructor(e)}function vr(t){if(t!==Object(t)){throw new TypeError("Expected [K, V] tuple: "+t)}}function dr(t){Nt(t.size);return q(t)}function yr(t){return a(t)?n:s(t)?i:u}function mr(t){return Object.create((a(t)?Q:s(t)?Y:X).prototype)}function gr(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else{return V.prototype.cacheResult.call(this)}}function wr(t,e){return t>e?1:t<e?-1:0}function Ir(t){var e=P(t);if(!e){if(!H(t)){throw new TypeError("Expected iterable or array-like: "+t)}e=P(r(t))}return e}e(Sr,bt);function Sr(t,e){var r;var n=function u(o){if(o instanceof n){return o}if(!(this instanceof n)){return new n(o)}if(!r){r=true;var a=Object.keys(t);qr(i,a);i.size=a.length;i._name=e;i._keys=a;i._defaultValues=t}this._map=Pt(o)};var i=n.prototype=Object.create(br);i.constructor=n;return n}Sr.prototype.toString=function(){return this.__toString(xr(this)+" {","}")};Sr.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)};Sr.prototype.get=function(t,e){if(!this.has(t)){return e}var r=this._defaultValues[t];return this._map?this._map.get(t,r):r};Sr.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var t=this.constructor;return t._empty||(t._empty=zr(this,ie()))};Sr.prototype.set=function(t,e){if(!this.has(t)){throw new Error('Cannot set unknown key "'+t+'" on '+xr(this))}if(this._map&&!this._map.has(t)){var r=this._defaultValues[t];if(e===r){return this}}var n=this._map&&this._map.set(t,e);if(this.__ownerID||n===this._map){return this}return zr(this,n)};Sr.prototype.remove=function(t){if(!this.has(t)){return this}var e=this._map&&this._map.remove(t);if(this.__ownerID||e===this._map){return this}return zr(this,e)};Sr.prototype.wasAltered=function(){return this._map.wasAltered()};Sr.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)};Sr.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)};Sr.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}var e=this._map&&this._map.__ensureOwner(t);if(!t){this.__ownerID=t;this._map=e;return this}return zr(this,e,t)};var br=Sr.prototype;br[v]=br.remove;br.deleteIn=br.removeIn=Vt.removeIn;br.merge=Vt.merge;br.mergeWith=Vt.mergeWith;br.mergeIn=Vt.mergeIn;br.mergeDeep=Vt.mergeDeep;br.mergeDeepWith=Vt.mergeDeepWith;br.mergeDeepIn=Vt.mergeDeepIn;br.setIn=Vt.setIn;br.update=Vt.update;br.updateIn=Vt.updateIn;br.withMutations=Vt.withMutations;br.asMutable=Vt.asMutable;br.asImmutable=Vt.asImmutable;function zr(t,e,r){var n=Object.create(Object.getPrototypeOf(t));n._map=e;n.__ownerID=r;return n}function xr(t){return t._name||t.constructor.name||"Record"}function qr(t,e){try{e.forEach(kr.bind(undefined,t))}catch(t){}}function kr(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){gt(this.__ownerID,"Cannot set on an immutable record.");this.set(e,t)}})}e(Dr,xt);function Dr(t){return t===null||t===undefined?Kr():Mr(t)&&!h(t)?t:Kr().withMutations(function(e){var r=u(t);Nt(r.size);r.forEach(function(t){return e.add(t)})})}Dr.of=function(){return this(arguments)};Dr.fromKeys=function(t){return this(n(t).keySeq())};Dr.prototype.toString=function(){return this.__toString("Set {","}")};Dr.prototype.has=function(t){return this._map.has(t)};Dr.prototype.add=function(t){return Ar(this,this._map.set(t,true))};Dr.prototype.remove=function(t){return Ar(this,this._map.remove(t))};Dr.prototype.clear=function(){return Ar(this,this._map.clear())};Dr.prototype.union=function(){var e=t.call(arguments,0);e=e.filter(function(t){return t.size!==0});if(e.length===0){return this}if(this.size===0&&!this.__ownerID&&e.length===1){return this.constructor(e[0])}return this.withMutations(function(t){for(var r=0;r<e.length;r++){u(e[r]).forEach(function(e){return t.add(e)})}})};Dr.prototype.intersect=function(){var e=t.call(arguments,0);if(e.length===0){return this}e=e.map(function(t){return u(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){if(!e.every(function(t){return t.includes(r)})){t.remove(r)}})})};Dr.prototype.subtract=function(){var e=t.call(arguments,0);if(e.length===0){return this}e=e.map(function(t){return u(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){if(e.some(function(t){return t.includes(r)})){t.remove(r)}})})};Dr.prototype.merge=function(){return this.union.apply(this,arguments)};Dr.prototype.mergeWith=function(e){var r=t.call(arguments,1);return this.union.apply(this,r)};Dr.prototype.sort=function(t){return Rr(hr(this,t))};Dr.prototype.sortBy=function(t,e){return Rr(hr(this,e,t))};Dr.prototype.wasAltered=function(){return this._map.wasAltered()};Dr.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)};Dr.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)};Dr.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}var e=this._map.__ensureOwner(t);if(!t){this.__ownerID=t;this._map=e;return this}return this.__make(e,t)};function Mr(t){return!!(t&&t[Or])}Dr.isSet=Mr;var Or="@@__IMMUTABLE_SET__@@";var Er=Dr.prototype;Er[Or]=true;Er[v]=Er.remove;Er.mergeDeep=Er.merge;Er.mergeDeepWith=Er.mergeWith;Er.withMutations=Vt.withMutations;Er.asMutable=Vt.asMutable;Er.asImmutable=Vt.asImmutable;Er.__empty=Kr;Er.__make=jr;function Ar(t,e){if(t.__ownerID){t.size=e.size;t._map=e;return t}return e===t._map?t:e.size===0?t.__empty():t.__make(e)}function jr(t,e){var r=Object.create(Er);r.size=t?t.size:0;r._map=t;r.__ownerID=e;return r}var Ur;function Kr(){return Ur||(Ur=jr(ie()))}e(Rr,Dr);function Rr(t){return t===null||t===undefined?Jr():Tr(t)?t:Jr().withMutations(function(e){var r=u(t);Nt(r.size);r.forEach(function(t){return e.add(t)})})}Rr.of=function(){return this(arguments)};Rr.fromKeys=function(t){return this(n(t).keySeq())};Rr.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function Tr(t){return Mr(t)&&h(t)}Rr.isOrderedSet=Tr;var Lr=Rr.prototype;Lr[_]=true;Lr.__empty=Jr;Lr.__make=Wr;function Wr(t,e){var r=Object.create(Lr);r.size=t?t.size:0;r._map=t;r.__ownerID=e;return r}var Br;function Jr(){return Br||(Br=Wr(Fe()))}e(Cr,zt);function Cr(t){return t===null||t===undefined?Qr():Nr(t)?t:Qr().unshiftAll(t)}Cr.of=function(){return this(arguments)};Cr.prototype.toString=function(){return this.__toString("Stack [","]")};Cr.prototype.get=function(t,e){var r=this._head;t=k(this,t);while(r&&t--){r=r.next}return r?r.value:e};Cr.prototype.peek=function(){return this._head&&this._head.value};Cr.prototype.push=function(){if(arguments.length===0){return this}var t=this.size+arguments.length;var e=this._head;for(var r=arguments.length-1;r>=0;r--){e={value:arguments[r],next:e}}if(this.__ownerID){this.size=t;this._head=e;this.__hash=undefined;this.__altered=true;return this}return Hr(t,e)};Cr.prototype.pushAll=function(t){t=i(t);if(t.size===0){return this}Nt(t.size);var e=this.size;var r=this._head;t.reverse().forEach(function(t){e++;r={value:t,next:r}});if(this.__ownerID){this.size=e;this._head=r;this.__hash=undefined;this.__altered=true;return this}return Hr(e,r)};Cr.prototype.pop=function(){return this.slice(1)};Cr.prototype.unshift=function(){return this.push.apply(this,arguments)};Cr.prototype.unshiftAll=function(t){return this.pushAll(t)};Cr.prototype.shift=function(){return this.pop.apply(this,arguments)};Cr.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this}return Qr()};Cr.prototype.slice=function(t,e){if(M(t,e,this.size)){return this}var r=O(t,this.size);var n=E(e,this.size);if(n!==this.size){return zt.prototype.slice.call(this,t,e)}var i=this.size-r;var u=this._head;while(r--){u=u.next}if(this.__ownerID){this.size=i;this._head=u;this.__hash=undefined;this.__altered=true;return this}return Hr(i,u)};Cr.prototype.__ensureOwner=function(t){if(t===this.__ownerID){return this}if(!t){this.__ownerID=t;this.__altered=false;return this}return Hr(this.size,this._head,t,this.__hash)};Cr.prototype.__iterate=function(t,e){if(e){return this.reverse().__iterate(t)}var r=0;var n=this._head;while(n){if(t(n.value,r++,this)===false){break}n=n.next}return r};Cr.prototype.__iterator=function(t,e){if(e){return this.reverse().__iterator(t)}var r=0;var n=this._head;return new W(function(){if(n){var e=n.value;n=n.next;return B(t,r++,e)}return J()})};function Nr(t){return!!(t&&t[Pr])}Cr.isStack=Nr;var Pr="@@__IMMUTABLE_STACK__@@";var Fr=Cr.prototype;Fr[Pr]=true;Fr.withMutations=Vt.withMutations;Fr.asMutable=Vt.asMutable;Fr.asImmutable=Vt.asImmutable;Fr.wasAltered=Vt.wasAltered;function Hr(t,e,r,n){var i=Object.create(Fr);i.size=t;i._head=e;i.__ownerID=r;i.__hash=n;i.__altered=false;return i}var Vr;function Qr(){return Vr||(Vr=Hr(0))}function Yr(t,e){var r=function(r){t.prototype[r]=e[r]};Object.keys(e).forEach(r);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r);return t}r.Iterator=W;Yr(r,{toArray:function(){Nt(this.size);var t=new Array(this.size||0);this.valueSeq().__iterate(function(e,r){t[r]=e});return t},toIndexedSeq:function(){return new Qe(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS==="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON==="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Ve(this,true)},toMap:function(){return Pt(this.toKeyedSeq())},toObject:function(){Nt(this.size);var t={};this.__iterate(function(e,r){t[r]=e});return t},toOrderedMap:function(){return Je(this.toKeyedSeq())},toOrderedSet:function(){return Rr(a(this)?this.valueSeq():this)},toSet:function(){return Dr(a(this)?this.valueSeq():this)},toSetSeq:function(){return new Ye(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cr(a(this)?this.valueSeq():this)},toList:function(){return ze(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){if(this.size===0){return t+e}return t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return _r(this,or(this,e))},includes:function(t){return this.some(function(e){return vt(e,t)})},entries:function(){return this.__iterator(K)},every:function(t,e){Nt(this.size);var r=true;this.__iterate(function(n,i,u){if(!t.call(e,n,i,u)){r=false;return false}});return r},filter:function(t,e){return _r(this,tr(this,t,e,true))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},findEntry:function(t,e,r){var n=r;this.__iterate(function(r,i,u){if(t.call(e,r,i,u)){n=[i,r];return false}});return n},findLastEntry:function(t,e,r){return this.toSeq().reverse().findEntry(t,e,r)},forEach:function(t,e){Nt(this.size);return this.__iterate(e?t.bind(e):t)},join:function(t){Nt(this.size);t=t!==undefined?""+t:",";var e="";var r=true;this.__iterate(function(n){r?r=false:e+=t;e+=n!==null&&n!==undefined?n.toString():""});return e},keys:function(){return this.__iterator(j)},map:function(t,e){return _r(this,Ze(this,t,e))},reduce:function(t,e,r){Nt(this.size);var n;var i;if(arguments.length<2){i=true}else{n=e}this.__iterate(function(e,u,o){if(i){i=false;n=e}else{n=t.call(r,n,e,u,o)}});return n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return _r(this,$e(this,true))},slice:function(t,e){return _r(this,nr(this,t,e,true))},some:function(t,e){return!this.every(tn(t),e)},sort:function(t){return _r(this,hr(this,t))},values:function(){return this.__iterator(U)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?this.size===0:!this.some(function(){return true})},count:function(t,e){return q(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return er(this,t,e)},equals:function(t){return dt(this,t)},entrySeq:function(){var t=this;if(t._cache){return new Z(t._cache)}var e=t.toSeq().map($r).toIndexedSeq();e.fromEntrySeq=function(){return t.toSeq()};return e},filterNot:function(t,e){return this.filter(tn(t),e)},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},first:function(){return this.find(D)},flatMap:function(t,e){return _r(this,sr(this,t,e))},flatten:function(t){return _r(this,ar(this,t,true))},fromEntrySeq:function(){return new Xe(this)},get:function(t,e){
return this.find(function(e,r){return vt(r,t)},undefined,e)},getIn:function(t,e){var r=this;var n=Ir(t);var i;while(!(i=n.next()).done){var u=i.value;r=r&&r.get?r.get(u,g):g;if(r===g){return e}}return r},groupBy:function(t,e){return rr(this,t,e)},has:function(t){return this.get(t,g)!==g},hasIn:function(t){return this.getIn(t,g)!==g},isSubset:function(t){t=typeof t.includes==="function"?t:r(t);return this.every(function(e){return t.includes(e)})},isSuperset:function(t){t=typeof t.isSubset==="function"?t:r(t);return t.isSubset(this)},keySeq:function(){return this.toSeq().map(Zr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return cr(this,t)},maxBy:function(t,e){return cr(this,e,t)},min:function(t){return cr(this,t?en(t):un)},minBy:function(t,e){return cr(this,e?en(e):un,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return _r(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return _r(this,ur(this,t,e,true))},skipUntil:function(t,e){return this.skipWhile(tn(t),e)},sortBy:function(t,e){return _r(this,hr(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return _r(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return _r(this,ir(this,t,e))},takeUntil:function(t,e){return this.takeWhile(tn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var Xr=r.prototype;Xr[c]=true;Xr[L]=Xr.values;Xr.__toJS=Xr.toArray;Xr.__toStringMapper=rn;Xr.inspect=Xr.toSource=function(){return this.toString()};Xr.chain=Xr.flatMap;Xr.contains=Xr.includes;Yr(n,{flip:function(){return _r(this,Ge(this))},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return vt(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return vt(e,t)})},mapEntries:function(t,e){var r=this;var n=0;return _r(this,this.toSeq().map(function(i,u){return t.call(e,[u,i],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return _r(this,this.toSeq().flip().map(function(n,i){return t.call(e,n,i,r)}).flip())}});var Gr=n.prototype;Gr[p]=true;Gr[L]=Xr.entries;Gr.__toJS=Xr.toObject;Gr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+rn(t)};Yr(i,{toKeyedSeq:function(){return new Ve(this,false)},filter:function(t,e){return _r(this,tr(this,t,e,false))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return e===undefined?-1:e},lastIndexOf:function(t){var e=this.toKeyedSeq().reverse().keyOf(t);return e===undefined?-1:e},reverse:function(){return _r(this,$e(this,false))},slice:function(t,e){return _r(this,nr(this,t,e,false))},splice:function(t,e){var r=arguments.length;e=Math.max(e|0,0);if(r===0||r===2&&!e){return this}t=O(t,t<0?this.count():this.size);var n=this.slice(0,t);return _r(this,r===1?n:n.concat(x(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.toKeyedSeq().findLastKey(t,e);return r===undefined?-1:r},first:function(){return this.get(0)},flatten:function(t){return _r(this,ar(this,t,false))},get:function(t,e){t=k(this,t);return t<0||(this.size===Infinity||this.size!==undefined&&t>this.size)?e:this.find(function(e,r){return r===t},undefined,e)},has:function(t){t=k(this,t);return t>=0&&(this.size!==undefined?this.size===Infinity||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return _r(this,fr(this,t))},interleave:function(){var t=[this].concat(x(arguments));var e=lr(this.toSeq(),Y.of,t);var r=e.flatten(true);if(e.size){r.size=e.size*t.length}return _r(this,r)},last:function(){return this.get(-1)},skipWhile:function(t,e){return _r(this,ur(this,t,e,false))},zip:function(){var t=[this].concat(x(arguments));return _r(this,lr(this,nn,t))},zipWith:function(t){var e=x(arguments);e[0]=this;return _r(this,lr(this,t,e))}});i.prototype[l]=true;i.prototype[_]=true;Yr(u,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});u.prototype.has=Xr.includes;u.prototype.contains=u.prototype.includes;Yr(Q,n.prototype);Yr(Y,i.prototype);Yr(X,u.prototype);Yr(bt,n.prototype);Yr(zt,i.prototype);Yr(xt,u.prototype);function Zr(t,e){return e}function $r(t,e){return[e,t]}function tn(t){return function(){return!t.apply(this,arguments)}}function en(t){return function(){return-t.apply(this,arguments)}}function rn(t){return typeof t==="string"?JSON.stringify(t):t}function nn(){return x(arguments)}function un(t,e){return t<e?1:t>e?-1:0}function on(t){if(t.size===Infinity){return 0}var e=h(t);var r=a(t);var n=e?1:0;var i=t.__iterate(r?e?function(t,e){n=31*n+sn(Dt(t),Dt(e))|0}:function(t,e){n=n+sn(Dt(t),Dt(e))|0}:e?function(t){n=31*n+Dt(t)|0}:function(t){n=n+Dt(t)|0});return an(i,n)}function an(t,e){e=qt(e,3432918353);e=qt(e<<15|e>>>-15,461845907);e=qt(e<<13|e>>>-13,5);e=(e+3864292196|0)^t;e=qt(e^e>>>16,2246822507);e=qt(e^e>>>13,3266489909);e=kt(e^e>>>16);return e}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var fn={Iterable:r,Seq:V,Collection:St,Map:Pt,OrderedMap:Je,List:ze,Stack:Cr,Set:Dr,OrderedSet:Rr,Record:Sr,Range:wt,Repeat:yt,is:vt,fromJS:ct};return fn})},{}]},{},[3])(3)});
